<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Mobile Studio v0.0.1</title>
    <link rel="stylesheet" href="css/startup.css">
    <script>window.$ = window.jQuery = require('./js/jquery-3.0.0.min.js');</script>
    <script>window.FSM = require('./js/FileSystemManager.js');</script>

    <script>
        var workingPath = null;
        
        $(window).ready(function(){    
                        
            //require('shelljs/global');        Questo provoca ERRORONI!
            
            //checkIfNativeScriptIsPresent();
            
            $("#createNewProject").on("click", function(){
                    $("#firstScreen").addClass("animate");
                    $("#secondScreen").addClass("animate");   
            });
            
            $("#startEditorBtn").on("click", function(event){
                event.preventDefault();
                openEditorAndClose();  
            });
            $("#btnDir").on("click",function(event){
                event.preventDefault();
                selectDir();
            });
        });
        
       /* function checkIfNativeScriptIsPresent(){
            /*try {
                console.log(require.resolve("tns"));
            } catch(e) {
                alert("Warning: NativeScript has not been found in your system. NativeScript is needed to run Mobile Studio, please install it. ");
                window.close();
            }
            if (!which('blablabla')) {
              alert('Sorry, this script requires BlaBlaBla!!!');
              exit(1);
            }
        }*/
        
        function openEditorAndClose(){
            const {ipcRenderer} = require('electron');
            if(!workingPath) alert("Error: no folder specified");
            /*var fs = new FileSystemManager(workingPath);
            alert(fs.getWorkingPath);*/
            else ipcRenderer.send('asynchronous-message', ["startEditor", workingPath]);
        }
        
        
        function selectDir(){
            const {dialog} = require('electron').remote;
            
            workingPath = dialog.showOpenDialog({properties: ['openDirectory']});
            
            $("#dirProject").val(workingPath);
            }
        

    </script>
  </head>
  <body>
      <section id="firstScreen">
          <h2>Welcome</h2>
          <img src="img/mainIcon.png"/>


          <h1><strong>Mobile</strong> Studio</h1>
          <h4>The first cross-platform IDE for cross-platform mobile apps</h4>
          <br>
          <section id="projectsDrawer">
                <h1>Your Projects</h1>
                <button id="createNewProject">Create a new app</button>
          </section>
      </section>
      <section id="secondScreen">
          <form>
              <input id="nameProject" class="textInput" type="text" placeholder="Give a name to your fantastic project"/>
              <br><input id="dirProject" class="textInput" type="text" placeholder="Select project folder"/>
              <button id="btnDir">...</button>
              <br>
         
              Build for
              <br/>
              <input type="checkbox">Android<br>
              <input type="checkbox">iOS<br>
              <br><br>
              <button id="startEditorBtn">Start Editor</button>
          </form>
      </section>
  </body>
</html>